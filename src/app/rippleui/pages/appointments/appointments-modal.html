<!--
  ~  Copyright 2016 Ripple Foundation C.I.C. Ltd
  ~  
  ~  Licensed under the Apache License, Version 2.0 (the "License");
  ~  you may not use this file except in compliance with the License.
  ~  You may obtain a copy of the License at
  ~  
  ~    http://www.apache.org/licenses/LICENSE-2.0

  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  -->

<div class="modal-header">
    <h4 class="modal-title">{{ modal.title }}</h4>
</div>

<div class="modal-body">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">{{ patient.name }}</h4>
    </div>
    <div class="panel-body">
      <div class="row">
        <div class="col-sm-4 text-left"><label>DOB:</label> <strong>{{ patient.dateOfBirth | date:'dd-MMM-yyyy' }}</strong></div>
        <div class="col-sm-4 text-center"><label>Gender:</label> <strong>{{ patient.gender }}</strong></div>
        <div class="col-sm-4 text-right"><label>NHS No:</label> <strong>{{ patient.nhsNumber | formatNHSNumber }}</strong></div>
      </div>
    </div>
  </div>
  <form name="appointmentForm" class="appointmentForm form-horizontal text-left">
    <fieldset>
      <legend>{{ modal.title }}</legend>
       <div class="row hidden-xs hidden-sm">
        <div class="col-md-3">
        <div class="btn appointmentTabs eolTabs" ng-model="radioModel" ng-click="radioModel='Tab1'" btn-radio="'Tab1'">Service</div>

        <div class="btn appointmentTabs eolTabsBottom eolTabs" ng-model="radioModel" ng-click="radioModel='Tab2'" btn-radio="'Tab2'">Schedule</div>
        </div>
        <div class="col-md-9">
         <div ng-if="radioModel == 'Tab1'" class="appointmentTabContent">
            <div class="row outerRow">
             <row class="applyFloatRight">
                 <div class="col-md-5">
                  <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.careserviceteam.$dirty) && appointmentForm.careserviceteam.$invalid, 'has-success': appointmentForm.careserviceteam.$valid && appointmentForm.careserviceteam.$dirty}">
          <label for="name" class="control-label col-md-12">Care Service Team</label>
          <div class="col-md-12">
            <div class="input-group">
              <input type="text" class="form-control input-sm" id="careserviceteam" name="careserviceteam" ng-model="appointment.serviceTeam"  required/>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && appointmentForm.careserviceteam.$error.required">You must enter a value.</span>
          </div>
        </div>
                 </div>
                 <div class="col-md-4 appointmentLocationGroup">
                  <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.location.$dirty) && appointmentForm.location.$invalid, 'has-success': appointmentForm.location.$valid && appointmentForm.location.$dirty}">
          <label for="name" class="control-label col-md-12">Location</label>
          <div class="col-md-12">
            <div class="input-group">
              <input type="text" class="form-control input-sm" id="location" name="location" ng-model="appointment.location"  disabled/>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && appointmentForm.location.$error.required">You must enter a value.</span>
          </div>
        </div>
        </div>
                 <div class="col-md-3 appointmentStatusGroup">
                 <div class="form-group form-group-sm">
        <label for="status" class="control-label col-md-12">Status</label>
        <div class="col-md-12">
          <div class="input-group">
              <label>{{appointment.status}}</label>
          </div>
          </div>
        </div>
            </div>
            </row>
            <row class="applyFloatRight">
                <div class="col-md-5">
                 <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.dateofappointment.$dirty) && appointmentForm.dateofappointment.$invalid, 'has-success': eolcareplanForm.dateofappointment.$valid && eolcareplanForm.dateofappointment.$dirty}">
          <label for="dateofappointment" class="control-label col-md-12">Date of Appointment</label>
          <div class="col-md-12">
            <div class="input-group">
            <span class="input-group-btn">
              <button type="button" class="btn btn-default btn-sm" disabled><i class="fa fa-calendar"></i></button>
            </span>
              <input type="text" class="form-control" id="dateofappointment" name="dateofappointment" ng-model="appointment.dateOfAppointment" ng-click="openAppointmentDatepicker($event, 'dateOfAppointment')"  datepicker-popup="dd-MMM-y" is-open="$parent.dateOfAppointment" disabled required/>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && appointmentForm.dateofappointment.$error.required">You must enter a valid date.</span>
          </div>
        </div>
        </div>
                <div class="col-md-4 appointmentLocationGroup">
                  <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.timeslot.$dirty) && appointmentForm.timeslot.$invalid, 'has-success': appointmentForm.timeslot.$valid && appointmentForm.timeslot.$dirty}">
          <label for="name" class="control-label col-md-12">Time slot</label>
          <div class="col-md-12">
            <div class="input-group">
              <input type="text" class="form-control input-sm" id="timeslot" name="timeslot" ng-model="timeSlotFull" disabled/>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && appointmentForm.timeslot.$error.required">You must enter a value.</span>
          </div>
        </div>
         </div>
            <div class="col-md-3">
             <button class="btn btn-primary" ng-click="schedule()"><i class="fa fa-calendar"></i>{{getScheduleLabel()}}</button>
            </div>
            </row>
            <row class="applyFloatRight">
            <div class="col-md-5">
             <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.author.$dirty) && appointmentForm.author.$invalid, 'has-success': appointmentForm.author.$valid && appointmentForm.author.$dirty}">
          <label for="author" class="control-label col-md-12">Author</label>
          <div class="col-md-12">
            <div class="input-group">
              <input type="text" value="{{currentUser.email}}" placeholder="{{currentUser.email}}" class="form-control input-sm" id="author" name="author" ng-model="appointment.author" disabled />
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && author.$error.required">You must enter a value.</span>
          </div>
        </div>
        </div>
        <div class="col-md-4">
          <div class="appointmentdateGroup form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.datecreated.$dirty) && appointmentForm.datecreated.$invalid, 'has-success': appointmentForm.datecreated.$valid && appointmentForm.datecreated.$dirty}">
          <label for="datecreated" class="control-label col-md-12">Date</label>
          <div class="col-md-12">
            <div class="input-group">
            <span class="input-group-btn">
              <button type="button" class="btn btn-default btn-sm" disabled><i class="fa fa-calendar"></i></button>
            </span>
              <input type="text" class="form-control" id="datecreated" name="datecreated" ng-model="appointment.dateCreated" datepicker-popup="dd-MMM-yyyy" is-open="$parent.dateCreated" disabled required/>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && appointmentForm.datecreated.$error.required">You must    enter a valid date.</span>
          </div>
        </div>
        </div>
            </row>
            </div>
         </div>
        <div ng-if="radioModel == 'Tab2'" class="tabContent">
            <div class="row tabContetInner referral-calendar-view">
                    <div class="row">
                        <div class="col-md-12">
                        <label for="timeSlot" class="control-label">Select Time Slot</label>
                        </div>
                    </div>
                  <div class="row">
                        <div class="col-md-12">
                    <div class="calendar" ui-calendar="uiConfig.calendar" ng-model="eventSource"></div>
                  </div>
                </div>
            </div>
        </div>
        </div>
      </div>
        <div class="row col-xs-12 col-sm-12 hidden-md hidden-lg">
        <div class="col-sm-12">
         <div ng-if="radioModel == 'Tab1'" class="appointmentTabContentMobile">
            <div class="row">
             <row>
                 <div class="col-xs-12 col-sm-12 ">
                  <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.careserviceteam.$dirty) && appointmentForm.careserviceteam.$invalid, 'has-success': appointmentForm.careserviceteam.$valid && appointmentForm.careserviceteam.$dirty}">
          <label for="name" class="control-label col-md-12">Care Service Team</label>
          <div class="col-md-12">
            <div class="input-group">
              <input type="text" class="form-control input-sm" id="careserviceteam" name="careserviceteam" ng-model="appointment.serviceTeam"  required/>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && appointmentForm.careserviceteam.$error.required">You must enter a value.</span>
          </div>
        </div>
                 </div>
                 <div class="col-xs-12 col-sm-12 ">
                  <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.location.$dirty) && appointmentForm.location.$invalid, 'has-success': appointmentForm.location.$valid && appointmentForm.location.$dirty}">
          <label for="name" class="control-label col-md-12">Location</label>
          <div class="col-md-12">
            <div class="input-group">
              <input type="text" value="Leeds General" placeholder="Leeds General" class="form-control input-sm" id="location" name="location" ng-model="appointment.location"  disabled/>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && appointmentForm.location.$error.required">You must enter a value.</span>
          </div>
        </div>
        </div>
                 <div class="col-xs-12 col-sm-12">
                 <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.status.$dirty) && appointmentForm.status.$invalid, 'has-success': appointmentForm.status.$valid && appointmentForm.status.$dirty}">
        <label for="status" class="control-label col-md-12">Status</label>
        <div class="col-md-12">
          <div class="input-group">
            <select class="form-control" name="status" id="status" ng-model="appointmentForm.status" required>
              <option value="">Select Status</option>
              <option>Scheduled</option>
              <option>Not Scheduled</option>
            </select>
          </div>
        <span class="help-block animate-fade" ng-show="formSubmitted && appointmentForm.status.$error.required">You must enter a value.</span>
          </div>
        </div>
            </div>
            </row>
            <row>
                <div class="col-xs-12 col-sm-12">
                 <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.dateofappointment.$dirty) && appointmentForm.dateofappointment.$invalid, 'has-success': appointmentForm.dateofappointment.$valid && appointmentForm.dateofappointment.$dirty}">
          <label for="dateofappointment" class="control-label col-md-12">Date of Appointment</label>
          <div class="col-md-12">
            <div class="input-group">
            <span class="input-group-btn">
              <button type="button" class="btn btn-default btn-sm"><i class="fa fa-calendar"></i></button>
            </span>
              <input type="text" class="form-control" id="dateofappointment" name="dateofappointment" ng-model="appointment.dateOfAppointment" ng-click="openAppointmentDatepicker($event, 'dateOfAppointment')"  datepicker-popup is-open="$parent.dateOfAppointment" disabled required/>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && appointmentForm.dateofappointment.$error.required">You must enter a valid date.</span>
          </div>
        </div>
        </div>
                <div class="col-xs-12 col-sm-12">
                  <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.timeslot.$dirty) && appointmentForm.timeslot.$invalid, 'has-success': appointmentForm.timeslot.$valid && appointmentForm.timeslot.$dirty}">
          <label for="name" class="control-label col-md-12">Time slot</label>
          <div class="col-md-12">
            <div class="input-group">
              <input type="text" class="form-control input-sm" id="timeslot" ui-timepicker name="timeslot" ng-model="appointment.timeSlot" disabled/>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && appointmentForm.timeslot.$error.required">You must enter a value.</span>
          </div>
        </div>
         </div>
            <div class="col-xs-12 col-sm-12 ">
             <button class="btn btn-primary" ng-click=""><i class="fa fa-calendar"></i> Re-Schedule</button>
            </div>
            </row>
            <row>
            <div class="col-xs-12 col-sm-12 ">
             <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.author.$dirty) && appointmentForm.author.$invalid, 'has-success': appointmentForm.author.$valid && appointmentForm.author.$dirty}">
          <label for="author" class="control-label col-md-12">Author</label>
          <div class="col-md-12">
            <div class="input-group">
              <input type="text" value="{{currentUser.email}}" placeholder="{{currentUser.email}}" class="form-control input-sm" id="author" name="author" ng-model="appointment.author" disabled />
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && author.$error.required">You must enter a value.</span>
          </div>
        </div>
        </div>
                <div class="col-xs-12 col-sm-12">
                      <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || appointmentForm.datecreated.$dirty) && appointmentForm.datecreated.$invalid, 'has-success': appointmentForm.datecreated.$valid && appointmentForm.datecreated.$dirty}">
          <label for="datecreated" class="control-label col-md-12">Date</label>
          <div class="col-md-12">
            <div class="input-group">
            <span class="input-group-btn">
              <button type="button" class="btn btn-default btn-sm"><i class="fa fa-calendar"></i></button>
            </span>
              <input type="text" class="form-control" id="datecreated" name="datecreated" ng-click="openDatepicker($event, 'dateCreated')" ng-model="appointment.dateCreated"  disabled required/>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && appointmentForm.datecreated.$error.required">You must enter a valid date.</span>
          </div>
        </div>
        </div>
            </row>
            </div>
         </div>
         <div ng-if="radioModel == 'Tab2'" class="tabContent">

        </div>
        </div>
     </div>
    </fieldset>
  </form>
</div>
<div class="modal-footer">
   <a class="btn btn-danger" ng-click="cancel()">Cancel</a>
    <button class="btn btn-success" ng-click="formSubmitted = true; ok(appointmentForm, appointment);"><i class="fa fa-check"></i> Complete</button>
</div>
