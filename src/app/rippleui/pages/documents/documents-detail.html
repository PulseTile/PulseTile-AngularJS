<!--
  ~  Copyright 2016 Ripple Foundation C.I.C. Ltd
  ~  
  ~  Licensed under the Apache License, Version 2.0 (the "License");
  ~  you may not use this file except in compliance with the License.
  ~  You may obtain a copy of the License at
  ~  
  ~    http://www.apache.org/licenses/LICENSE-2.0

  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  -->

<div class="transbox">
    <div class="innerTransbox">
        <h3><strong>Document</strong></h3>

        <div class="form-horizontal text-left">

            <div ng-if="$ctrl.clinicalDocument.documentType == 'Healthlink Discharge summary'">
                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Document Name:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.documentType }}</div>
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Document Date:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.documentDate | date:'dd-MMM-yyyy' }}</div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6">Author</label>
                    <div class="col-md-9">
                        <div class="form-control-static">
                            <label class="control-label col-lg-4">Name:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.author_name }}</div>
                            <label class="control-label col-lg-4">ID:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.author_id }}</div>
                            <label class="control-label col-lg-4">ID Scheme:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.author_idScheme }}</div>
                        </div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Facility:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.facility }}</div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6"><strong>Patient Identifiers</strong></label>
                    <div class="col-md-9">
                        <div class="form-control-static">
                            <label class="control-label col-lg-4">MRN:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.patientIdentifier_mrn }}</div>
                            <label class="control-label col-lg-4">MRN Type:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.patientIdentifier_mrnType }}</div>
                            <label class="control-label col-lg-4">OTH:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.patientIdentifier_oth }}</div>
                            <label class="control-label col-lg-4">OTH Type:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.patientIdentifier_othType }}</div>
                            <label class="control-label col-lg-4">GMS:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.patientIdentifier_gms }}</div>
                            <label class="control-label col-lg-4">GMS Type:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.patientIdentifier_gmsType }}</div>
                        </div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6"><strong>Responsible Professional</strong></label>
                    <div class="col-md-9">
                        <div class="form-control-static">
                            <label class="control-label col-lg-4">Name:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.responsibleProfessional_name }}</div>
                            <label class="control-label col-lg-4">ID:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.responsibleProfessional_id }}</div>
                            <label class="control-label col-lg-4">ID Type:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.responsibleProfessional_idType }}</div>
                        </div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Discharging Organisation:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.dischargingOrganisation }}</div>
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Date/Time of Discharge:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.dateTimeOfDischarge | date:'dd-MMM-yyyy' }}</div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6"><strong>Discharge Diagnoses</strong></label>
                    <div class="col-md-12">

                        <table class="table table-bordered table-striped table-hover">
                            <tbody>
                            <tr dir-paginate="diagnosis in $ctrl.clinicalDocument.diagnosisList | itemsPerPage: 3">
                                <td>{{ diagnosis.problem }}</td>
                                <td class="dateTime">{{ diagnosis.dateCreated | date:'dd-MMM-yyyy' }}</td>
                                <td style="text-align: center;">
                    <span title="Import to core record"
                          class="glyphicon glyphicon-floppy-disk ui-state-hover import-record"
                          ng-click="$ctrl.importDiagnosis(diagnosis)"></span>
                                </td>
                            </tr>

                            <tr ng-if="!$ctrl.clinicalDocument.diagnosisList || !$ctrl.clinicalDocument.diagnosisList.length">
                                <td colspan="3"><span class="label label-default">No diagnoses</span></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <label class="control-label col-md-3">Clinical Synopsis:</label>
                    <div class="col-md-9">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.clinicalSynopsis }}</div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Source:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.source }}</div>
                    </div>
                </div>
            </div>

            <div ng-if="$ctrl.clinicalDocument.documentType == 'Healthlink Referral'">
                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Document Name:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.documentType }}</div>
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Document Date:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.documentDate | date:'dd-MMM-yyyy' }}</div>
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Author:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.composerName }}</div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6">Facility:</label>
                    <div class="col-md-9">
                        <div class="form-control-static">
                            <label class="control-label col-lg-4">Name:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.facility }}</div>
                            <label class="control-label col-lg-4">Provider ID:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.providerId }}</div>
                        </div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6">Referral:</label>
                    <div class="col-md-9">
                        <div class="form-control-static">
                            <label class="control-label col-lg-4">Date:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.referralDateTime | date:'dd-MMM-yyyy' }}</div>
                            <label class="control-label col-lg-4">Type:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.referralType }}</div>
                            <label class="control-label col-lg-4">Priority:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.priorityOfReferral }}</div>
                            <label class="control-label col-lg-4">Ref:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.referralReferenceNumber }}</div>
                            <label class="control-label col-lg-4">From:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.referredFrom }}</div>
                            <label class="control-label col-lg-4">To:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.referredTo }}</div>
                            <label class="control-label col-lg-4">Comments:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.referralComments }}</div>

                            <div ng-repeat="referralReason in $ctrl.clinicalDocument.reasonForReferral">
                                <label class="control-label col-lg-4">Comments:</label><div class="form-control-static">{{ referralReason }}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6">Organisation/Provider:</label>
                    <div class="col-md-9">
                        <div class="form-control-static">
                            <label class="control-label col-lg-4">Name:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.providerContact_organisationName }}</div>
                            <label class="control-label col-lg-4">ID:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.providerContact_id }}</div>
                            <label class="control-label col-lg-4">Work Phone:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.providerContact_workNumber }}</div>
                            <label class="control-label col-lg-4">Emergency Phone:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.providerContact_emergencyNumber }}</div>
                            <label class="control-label col-lg-4">Email:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.providerContact_email }}</div>
                        </div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6">Referral Status:</label>
                    <div class="col-md-9">
                        <div class="form-control-static">
                            <label class="control-label col-lg-4">Status:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.referralStatus_value }}</div>
                            <label class="control-label col-lg-4">Original Code:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.referralStatus_mapped }}</div>
                            <label class="control-label col-lg-4">Code:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.referralStatus_code }}</div>
                        </div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6">Clinical Synopsis:</label>
                    <div class="col-md-9">
                        <div class="form-control-static">
                            <label class="control-label col-lg-4">Narrative:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.clinicalNarrative }}</div>
                            <label class="control-label col-lg-4">Present Illness:</label><div class="form-control-static col-lg-8">{{ $ctrl.clinicalDocument.presentIllness }}</div>
                            <label class="control-label col-lg-4">Comments:</label><div class="form-control-static col-lg-8">{{ $ctrl.clinicalDocument.clinicalSynopsisComments }}</div>
                            <label class="control-label col-lg-4">Previous Hospital:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.previousHospitalAttendance }}</div>
                        </div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6">Past Illnesses</label>
                    <div class="col-md-9">
                        <div class="form-control-static" ng-repeat="pastIllness in $ctrl.clinicalDocument.pastIllensses">
                            <label class="control-label col-lg-4">{{ pastIllness.value }}:</label><div class="form-control-static">{{ pastIllness.date | date:'dd-MMM-yyyy' }}</div>
                        </div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6">Surgical Procedures</label>
                    <div class="col-md-9">
                        <div class="form-control-static" ng-repeat="procedure in $ctrl.clinicalDocument.surgicalProcedures">
                            <label class="control-label col-lg-4">{{ procedure.value }}:</label><div class="form-control-static">{{ procedure.date | date:'dd-MMM-yyyy' }}</div>
                        </div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6"><strong>Medications</strong></label>
                    <div class="col-md-12">

                        <table class="table table-bordered table-striped table-hover">
                            <tbody>
                            <tr dir-paginate="medication in $ctrl.clinicalDocument.medications | itemsPerPage: 3">
                                <td>{{ medication.name }}</td>
                                <td class="dateTime">{{ medication.startDate | date:'dd-MMM-yyyy' }}</td>
                                <td style="text-align: center;">
                    <span title="Import to core record"
                          class="glyphicon glyphicon-floppy-disk ui-state-hover import-record"
                          ng-click="importMedication('{{ medication }}')"></span>
                                </td>
                            </tr>

                            <tr ng-if="!$ctrl.clinicalDocument.medications || !$ctrl.clinicalDocument.medications.length">
                                <td colspan="3"><span class="label label-default">No medications</span></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Medication Anticoagulation Use:</label>
                    <div class="col-md-6">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.medication_anticoagulation_use }}</div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6"><strong>Allergies</strong></label>
                    <div class="col-md-12">

                        <table class="table table-bordered table-striped table-hover">
                            <tbody>
                            <tr dir-paginate="allergy in $ctrl.clinicalDocument.allergies | itemsPerPage: 3">
                                <td>{{ allergy.cause }}</td>
                                <td>{{ allergy.reaction }}</td>
                                <td style="text-align: center;">
                    <span title="Import to core record"
                          class="glyphicon glyphicon-floppy-disk ui-state-hover import-record"
                          ng-click="$ctrl.importAllergy(allergy)"></span>
                                </td>
                            </tr>

                            <tr ng-if="!$ctrl.clinicalDocument.allergies || !$ctrl.clinicalDocument.allergies.length">
                                <td colspan="3"><span class="label label-default">No allergies</span></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Tobacco Use:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.tobaccoUse }}</div>
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Alcohol Use:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.alcholUse }}</div>
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Physical Impairment:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.physicalImparement }}</div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-6">Measurements:</label>
                    <div class="col-md-9">
                        <div class="form-control-static">
                            <label class="control-label col-lg-4">Systolic BP:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.systolicBP }}</div>
                            <label class="control-label col-lg-4">Systolic BP Units:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.systolicBP_units }}</div>
                            <label class="control-label col-lg-4">Diastolic BP:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.diastolicBP }}</div>
                            <label class="control-label col-lg-4">Diastolic BP Units:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.diastolicBP_units }}</div>
                            <label class="control-label col-lg-4">Pulse:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.pulse }}</div>
                            <label class="control-label col-lg-4">Pulse Units:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.pulse_units }}</div>
                            <label class="control-label col-lg-4">Height:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.height }}</div>
                            <label class="control-label col-lg-4">Height Units:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.height_units }}</div>
                            <label class="control-label col-lg-4">Weight:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.weight }}</div>
                            <label class="control-label col-lg-4">Weight Units:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.weight_units }}</div>
                            <label class="control-label col-lg-4">Body Mass:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.bodyMass }}</div>
                            <label class="control-label col-lg-4">Body Mass Units:</label><div class="form-control-static">{{ $ctrl.clinicalDocument.bodyMass_units }}</div>
                        </div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Other Examination Findings:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.otherExaminationFindings }}</div>
                    </div>
                </div>

                <br>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Original Source:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.documentOriginalSource }}</div>
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="control-label col-md-3">Source:</label>
                    <div class="col-lg-4">
                        <div class="form-control-static">{{ $ctrl.clinicalDocument.source }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
